<div id="ptr">
  <!-- Pull down arrow indicator -->
  <span class="genericon genericon-next">&#8595;</span>

  <!-- CSS-based loading indicator -->
  <div class="loading">
    <span id="l1"></span>
    <span id="l2"></span>
    <span id="l3"></span>
  </div>
</div>

<div id="content">

<% @meals.each do |meal| %>


  <div class="section-title">
    <%= time_ago_in_words(meal.created_at) %> ago
    <span style="float: right;"><%= (meal.created_at + 2.hours).strftime("%l:%M %P") %></span>
  </div>

  <div class="meal-records clearfix meal-records-carb-<%= (meal.carbs_estimate.compare_to(30..50) + 2) %>" title="<%= meal.carbs_estimate %>">
    <% meal.meal_records.sort{|a, b| b.size <=> a.size}.each do |meal_record| %>
      <div class="meal-container meal-size-<%= meal_record.size %>">
        <div class="meal meal-carb-<%= meal_record.carbs_estimate %>">
          <a href="#<%= meal_record.id %>">
            <%= image_tag(meal_record.photo.url(:medium)) %>
          </a>
        </div>
      </div>
    <% end %>
  </div>

<% end %>
</div>


<style media="screen">
  html,body{
    background: rgb(239, 242, 230);
  }
</style>

<!-- 
<script charset="utf-8" src="/js/hammer.2.0.4.js"></script>
<script charset="utf-8" src="/js/wptr.1.1.js"></script>

<script>

  var exampleLoadingFunction = function() {
    return new Promise( function( resolve, reject ) {
      // Run some async loading code here

      if ( true ) {
        window.location.reload();
        resolve();
      } else {
        reject();
      }
    } );
  };

  window.onload = function() {
    WebPullToRefresh.init( {
      loadingFunction: exampleLoadingFunction
    } );
  };
</script> -->
